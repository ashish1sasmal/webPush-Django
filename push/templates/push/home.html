{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="{% static 'push/js/push.min.js' %}" charset="utf-8"></script>
    <script src="{% static 'push/js/serviceWorker.min.js' %}" charset="utf-8"></script>

    <script type="text/javascript">



      function start(){

        var v="{{user.first_name}}";
        alert(v);
        Push.Permission.GRANTED;
        Push.create("Hello "+v, {
        body: "How's it hangin'?",
        data:"How was your day!",
        icon: "{% static 'push/images/batman-icon.png' %}",
        requireInteraction : true,

        onClick:function(){
          alert("Push Notification Clicked!");
        }
        });

        }
        </script>
    <title>Push Notification</title>
  </head>
  <body>
    <div class="container col-sm-4 mt-5 jumbotron">
      <button type="button" onclick="start()" id="notify" hidden>Notify</button>
        <h1>Hello</h1>
        {% if user.is_authenticated %}
        <a href="/admin/logout/">Logout</a>
        {% else %}
          <a href="{% url 'user_login' %}">Login</a>
    {% endif %}



    </div>



    </body>
    <!-- start webpushr code --> <script>(function(w,d, s, id) {if(typeof(w.webpushr)!=='undefined') return;w.webpushr=w.webpushr||function(){(w.webpushr.q=w.webpushr.q||[]).push(arguments)};var js, fjs = d.getElementsByTagName(s)[0];js = d.createElement(s); js.id = id;js.src = "https://cdn.webpushr.com/app.min.js";fjs.parentNode.appendChild(js);}(window,document, 'script', 'webpushr-jssdk'));webpushr('init','BNYstB0MmvGSstrtseYe5p6TQsBcwdMo1ha3L2RHbsSdawZh05RXaZRgyYtjILsf7de4vEO6cmpWwHLiSM4cjbI');</script><!-- end webpushr code -->
    <script type="text/javascript">
      {% if notifyFlag %}
        document.getElementById('notify').click();
        {% endif %}

    </script>

</html>
